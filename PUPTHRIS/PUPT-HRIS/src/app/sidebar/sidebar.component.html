<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<label for="my-drawer-2" aria-label="close sidebar" class="drawer-overlay"></label>
<ul class="menu bg-red-900 text-base-content text-white text-xl space-y-6 min-h-full w-80 p-6">
  <div class="logo-section flex items-center p-6">
    <img src="assets/PUPLogo.svg" alt="Logo" class="logo">
    <h1 class="text-2xl font-bold text-white ml-4">PUP - HRIS</h1>
  </div>  

  <!-- Dashboard -->
  <li>
    <a id="dashboard" class="sidebar-link" routerLink="/dashboard" (click)="setActive('dashboard')"
    [class.active]="activeItem === 'dashboard'"><i class="fa fa-th-large mr-3" aria-hidden="true"></i>Dashboard</a>
  </li>

  <!-- New Account -->
  <li *ngIf="canAddNewAccount">
    <a id="new-account" class="sidebar-link" routerLink="/new-account" (click)="setActive('new-account')"
    [class.active]="activeItem === 'new-account'"><i class="fas fa-user-plus mr-3"></i>New Account</a>
  </li>

  <!-- Employees -->
  <li *ngIf="canManageEmployees">
    <a id="employees" class="sidebar-link" routerLink="/employees" (click)="setActive('employees')"
    [class.active]="activeItem === 'employees'"><i class="fas fa-users mr-3"></i>Employees</a>
  </li>

  <!-- Maintenance Dropdown -->
  <li *ngIf="showMaintenanceMenu">
    <a id="maintenance" class="sidebar-link" (click)="toggleMaintenanceDropdown()"
      [class.active]="isMaintenanceActive">
      <i class="fas fa-cogs mr-3"></i>Maintenance
      <i [ngClass]="isMaintenanceDropdownOpen ? 'fas fa-chevron-up' : 'fas fa-chevron-down'" class="ml-auto"></i>
    </a>
    <ul *ngIf="isMaintenanceDropdownOpen" class="ml-6 mt-2 space-y-4 text-lg">
      <li *ngIf="canManageCollegeCampuses">
        <a routerLink="/college-campuses" (click)="setActive('college-campus-management')"
          [class.active]="activeItem === 'college-campus-management'"
          class="sidebar-link">
          <i class="fas fa-university mr-3"></i>College Campus</a>
      </li>
      <li *ngIf="canManageDepartments">
        <a routerLink="/departments" (click)="setActive('department-management')"
          [class.active]="activeItem === 'department-management'">
          <i class="fas fa-building mr-3"></i>Department</a>
      </li>
      <li *ngIf="canManageCoordinators">
        <a routerLink="/coordinator-management" (click)="setActive('coordinator-management')"
          [class.active]="activeItem === 'coordinator-management'">
          <i class="fas fa-user-tie mr-3"></i>Coordinator</a>
      </li>
      <li *ngIf="canManageUsers">
        <a routerLink="/user-management" (click)="setActive('user-management')"
          [class.active]="activeItem === 'user-management'">
          <i class="fas fa-users-cog mr-3"></i>User Management</a>
      </li>
    </ul>
  </li>

  <!-- Generate Reports Dropdown -->
  <li *ngIf="showReportsMenu">
    <a id="generate-reports" class="sidebar-link" (click)="toggleReportsDropdown()"
      [class.active]="isReportsActive">
      <i class="fas fa-file-alt mr-3"></i>Generate Reports
      <i [ngClass]="isReportsDropdownOpen ? 'fas fa-chevron-up' : 'fas fa-chevron-down'" class="ml-auto"></i>
    </a>
    <ul *ngIf="isReportsDropdownOpen" class="ml-6 mt-2 space-y-4 text-lg">
      <li *ngIf="canAccessEvaluation">
        <a routerLink="/evaluation" (click)="setActive('evaluation')"
          [class.active]="activeItem === 'evaluation'"
          class="sidebar-link">
          <i class="fas fa-clipboard-check mr-3"></i>Evaluation</a>
      </li>
    </ul>
  </li>

  <!-- Profile Section for all roles -->
  <li *ngIf="canAccessProfile">
    <a id="my-profile" class="sidebar-link" (click)="toggleProfileDropdown()" [class.active]="isProfileActive">
      <i class="fas fa-user mr-3"></i>My Profile
      <i [ngClass]="isProfileDropdownOpen ? 'fas fa-chevron-up' : 'fas fa-chevron-down'" class="ml-auto"></i>
    </a>
    <ul *ngIf="isProfileDropdownOpen" class="ml-6 mt-2 space-y-4 text-lg">
      <li><a routerLink="/basic-details" (click)="setActive('my-profile-basic-details')"
        [class.active]="activeItem === 'my-profile-basic-details'">Basic Details</a></li>
      <li><a routerLink="/personal-details" (click)="setActive('my-profile-personal-details')"
        [class.active]="activeItem === 'my-profile-personal-details'">Personal Details</a></li>
      <li><a routerLink="/educational-background" (click)="setActive('my-profile-educational-background')"
        [class.active]="activeItem === 'my-profile-educational-background'">Educational Background</a></li>
      <li><a routerLink="/trainings-and-seminars" (click)="setActive('my-profile-trainings-and-seminars')"
        [class.active]="activeItem === 'my-profile-trainings-and-seminars'">Trainings and Seminars</a></li>
      <li><a routerLink="/outstanding-achievement" (click)="setActive('my-profile-outstanding-achievement')"
        [class.active]="activeItem === 'my-profile-outstanding-achievement'">Outstanding Achievement</a></li>
      <li><a routerLink="/officer-membership" (click)="setActive('my-profile-officer-membership')"
        [class.active]="activeItem === 'my-profile-officer-membership'">Officership and Membership</a></li>
      <li>
        <a routerLink="/professional-license" 
           (click)="setActive('my-profile-professional-license')"
           [class.active]="activeItem === 'my-profile-professional-license'">
          Professional License
        </a>
      </li>
      <li>
        <a routerLink="/employment-information" 
           (click)="setActive('my-profile-employment-information')"
           [class.active]="activeItem === 'my-profile-employment-information'">
          Employment Information
        </a>
      </li>
      <li>
        <a routerLink="/certification" 
           (click)="setActive('my-profile-certification')"
           [class.active]="activeItem === 'my-profile-certification'">
          Certification
        </a>
      </li>
    </ul>
  </li>

    <!-- Resources -->
    <li>
      <a id="resources" class="sidebar-link" routerLink="/resources" (click)="setActive('resources')"
        [class.active]="activeItem === 'resources'">
        <i class="fas fa-book mr-3"></i>Resources
      </a>
    </li>

  <div class="flex-grow"></div>
  <!-- Settings - Visible to all roles -->
  <li>
    <a id="settings" class="sidebar-link" routerLink="/settings" (click)="setActive('settings')"
    [class.active]="activeItem === 'settings'"><i class="fas fa-cog mr-3"></i>Settings</a>
  </li>

  <!-- Logout -->
  <li>
    <a id="logout" class="sidebar-link" (click)="logout()">
      <i class="fas fa-sign-out-alt mr-3"></i>Logout</a>
  </li>
</ul>

<!-- Logout Confirmation Modal -->
<div *ngIf="showLogoutModal" class="modal-overlay">
  <div class="modal-content">
    <h2 class="text-xl font-bold mb-4">Confirm Logout</h2>
    <p class="mb-6">Are you sure you want to logout?</p>
    <div class="flex justify-end gap-4">
      <button class="btn btn-outline" (click)="cancelLogout()" [disabled]="isLoggingOut">Cancel</button>
      <button class="btn btn-danger" (click)="confirmLogout()" [disabled]="isLoggingOut">
        <span *ngIf="!isLoggingOut">Logout</span>
        <div *ngIf="isLoggingOut" class="spinner"></div>
      </button>
    </div>
  </div>
</div>
<!-- Success Modal -->
<div *ngIf="showSuccessMessage" class="modal-overlay">
  <div class="modal-content success-modal">
    <div class="success-icon-container">
      <i class="fas fa-check-circle text-green-500"></i>
    </div>
    <h2 class="text-xl font-bold text-green-500 mt-4">Account logged out successfully!</h2>
  </div>
</div>



